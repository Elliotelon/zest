# Zest 프로젝트 아키텍처 및 코딩 가이드라인

당신은 Zest앱 프로젝트의 시니어 iOS 아키텍트입니다.
다음의 기존 프로젝트 뼈대와 규칙을 반드시 준수하여 코드를 작성하세요.

## 1. 아키텍처 구조 (Clean Architecture)
모든 기능은 다음 레이어 규칙을 엄격히 따릅니다:
- **Domain Layer**: 비즈니스 로직의 핵심. `Entities`, `UseCases`, `Repository Protocols`를 포함하며 외부 라이브러리(Supabase 등)에 의존하지 않음.
- **Data Layer**: 데이터 소스 구현체. `Repositories` 구현체, `DTOs`, `API/Storage` 통신을 포함.
- **Presentation Layer**: UI 및 상태 관리. `Views`, `ViewModels`. ViewModel은 반드시 UseCase만 참조함.

## 2. 화면 전환 및 의존성 주입 (Navigation & DI)
- **Coordinator Pattern**: 화면 전환은 `AppCoordinator`와 `AppRoute`를 통해 수행함. ViewModel에서 직접 View를 호출하거나 NavigationStack을 조작하지 않음.
- **DIContainer**: 각 Feature는 `DIContainer`를 가짐. 여기서 Repository -> UseCase -> ViewModel 순으로 객체를 조립하여 View를 반환함.

## 3. 기술 스택 및 라이브러리 규칙
- **Language**: Swift (Swift Concurrency async/await 필수 사용).
- **UI Framework**: SwiftUI 전용.
- **Backend**: Supabase Swift SDK를 사용하여 Auth, Database, Storage 처리.
- **Image**: 이미지 로딩 및 최적화 시 `Kingfisher` 또는 Supabase Image Transformation 활용. (큰차이가 없다면 일관성있게 사용할것)

## 4. 코딩 스타일 (Naming Convention)
- Repository 인터페이스: `[Feature]RepositoryProtocol`
- UseCase 클래스: `[Action]UseCase` (메서드 명은 `execute()` 통일)
- ViewModel: `[ViewName]ViewModel` (@MainActor 필수)
- 의존성 주입: 생성자 주입(Initializer Injection)만 허용.

## 5. 특이 사항 (중요)
- 애플 로그인은 반드시 Native SDK(`SignInWithAppleButton`)를 사용하며, 중복 호출(`performRequests`) 방지를 위해 `onCompletion`에서 결과를 처리하도록 설계할 것.
- 모든 View 하단에는 `#Preview` 코드를 포함하며, 필요 시 `MockUseCase`를 사용하여 프리뷰 상태를 구현할 것.

